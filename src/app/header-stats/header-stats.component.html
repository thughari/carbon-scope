<div class="grid gap-6 grid-cols-1 md:grid-cols-3 h-full">

  <div class="glass-card p-6 flex flex-col justify-between relative overflow-hidden group min-h-[180px]">

    <div
      class="absolute -right-8 -top-8 opacity-10 pointer-events-none grayscale transition-opacity group-hover:opacity-20">
      <svg class="w-48 h-48 text-slate-200" fill="currentColor" viewBox="0 0 24 24">
        <path
          d="M12 2C6.48 2 2 6.48 2 12C2 17.52 6.48 22 12 22C17.52 22 22 17.52 22 12C22 6.48 17.52 2 12 2ZM11 19.93C7.05 19.44 4 16.08 4 12C4 11.38 4.08 10.79 4.21 10.21L9 15V16C9 17.1 9.9 18 11 18V19.93ZM17.9 17.39C17.64 16.58 16.9 16 16 16H15V13C15 12.45 14.55 12 14 12H8V10H10C10.55 10 11 9.55 11 9V7H13C14.1 7 15 6.1 15 5V4.59C17.93 5.78 20 8.65 20 12C20 14.08 19.2 15.97 17.9 17.39Z" />
      </svg>
    </div>

    <div class="relative z-10 flex flex-col h-full justify-between">

      <div>
        <div class="flex flex-wrap justify-between items-start gap-y-2">
          <p class="text-sm font-medium text-slate-400 uppercase tracking-wider whitespace-nowrap mr-2">Total Emissions
          </p>

          <span *ngIf="percentage < 99.9"
            class="inline-flex items-center px-2 py-0.5 rounded bg-slate-800 text-indigo-400 border border-indigo-500/20 text-[10px] font-bold whitespace-nowrap shadow-sm">
            {{ percentage | number:'1.1-1' }}% of Global
          </span>
          <span *ngIf="percentage >= 99.9"
            class="inline-flex items-center px-2 py-0.5 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 text-[10px] font-bold whitespace-nowrap shadow-sm">
            Global View
          </span>
        </div>

        <div class="mt-3">
          <div class="flex flex-wrap items-baseline gap-x-1">
            <span class="text-3xl sm:text-4xl font-bold text-white tracking-tight leading-none">
              {{ totalEmissions | number:'1.0-2' }}
            </span>
            <span class="text-lg font-medium text-indigo-400">Mt</span>
          </div>
        </div>
      </div>

      <div class="mt-4">
        <div class="w-full h-1.5 bg-slate-800 rounded-full overflow-hidden">
          <div
            class="h-full bg-gradient-to-r from-indigo-500 to-sky-400 rounded-full transition-all duration-1000 ease-out shadow-[0_0_10px_rgba(99,102,241,0.5)]"
            [style.width.%]="percentage">
          </div>
        </div>
        <p class="text-xs text-slate-500 mt-2 truncate font-medium">{{ gasLabel }}</p>
      </div>

    </div>
  </div>

  <div class="glass-card p-6 flex flex-col justify-between group min-h-[180px]">

    <div>
      <p class="text-sm font-medium text-slate-400 uppercase tracking-wider">Highest Sector</p>
      <h3 class="mt-3 text-2xl font-bold text-white break-words leading-tight" [title]="highestSector">
        {{ formattedHighestSector }}
      </h3>
    </div>

    <div class="mt-4 flex items-center gap-3">
      <div
        class="px-3 py-1 rounded-lg bg-rose-500/10 border border-rose-500/20 text-rose-400 text-xs font-semibold shadow-sm">
        Critical Source
      </div>
      <p class="text-xs text-slate-500">Requires attention</p>
    </div>
  </div>

  <div class="glass-card p-6 flex flex-col justify-between min-h-[180px]">

    <div>
      <p class="text-sm font-medium text-slate-400 uppercase tracking-wider">Analysis Year</p>
      <div class="mt-3 flex flex-wrap items-center gap-x-3 gap-y-2">
        <span class="text-4xl font-bold text-white leading-none">{{ yearRange[1] }}</span>

        <span *ngIf="isLatestYear"
          class="text-xs px-2 py-1 rounded bg-emerald-500/10 text-emerald-400 border border-emerald-500/20 font-semibold shadow-sm">Latest</span>
        <span *ngIf="!isLatestYear"
          class="text-xs px-2 py-1 rounded bg-amber-500/10 text-amber-400 border border-amber-500/20 font-semibold shadow-sm">Historical</span>
      </div>
    </div>

    <div class="text-xs text-slate-500 mt-4">
      <p class="mb-1 opacity-75">Data source:</p>
      <a href="https://climatetrace.org" target="_blank"
        class="text-indigo-400 hover:text-indigo-300 transition-colors flex items-center gap-1 font-medium w-fit">
        Climate TRACE Dataset
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" viewBox="0 0 24 24" fill="none"
          stroke="currentColor" stroke-width="2">
          <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"></path>
          <polyline points="15 3 21 3 21 9"></polyline>
          <line x1="10" y1="14" x2="21" y2="3"></line>
        </svg>
      </a>
      <span class="block mt-0.5 text-slate-600">(2021 - 2024 Dataset)</span>
    </div>
  </div>

</div>